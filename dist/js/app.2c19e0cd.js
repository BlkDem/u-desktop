(function(){"use strict";var e={7575:function(e,t,o){o(8052),o(1129);var s=o(4161),a=o(9242),n=o(3396);function i(e,t,o,s,a,i){const r=(0,n.up)("TopNavbar"),c=(0,n.up)("LoadControllers"),l=(0,n.up)("SelectedParams"),d=(0,n.up)("CommonCard"),m=(0,n.up)("MyMqtt"),u=(0,n.up)("MainFooter"),p=(0,n.up)("MasterSlaveLayout");return(0,n.wg)(),(0,n.j4)(p,null,{top:(0,n.w5)((()=>[(0,n.Wm)(r,{onOnMicroChange:i.onMicroChange,onPlayStopAction:i.playStopAction},null,8,["onOnMicroChange","onPlayStopAction"])])),left:(0,n.w5)((()=>[(0,n.Wm)(c,{ref:"loadControllers",microId:a.microId,onPushItem:i.pushItem},null,8,["microId","onPushItem"])])),center:(0,n.w5)((()=>[(0,n.Wm)(d,{cardCaption:"Selected",cardCaptionAdd:a.deviceAddress,isAdditionalCaption:!0},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{ref:"selectedParamsRef",items:a.selectedParams,logs:a.paramLogs,uptime:a.uptime,onRemoveItem:i.removeItem,onSetItemFrequency:i.setItemFrequency,onSetLog:i.setLog,onSyncParam:i.syncParam},null,8,["items","logs","uptime","onRemoveItem","onSetItemFrequency","onSetLog","onSyncParam"])])),_:1},8,["cardCaptionAdd"]),(0,n.Wm)(m,{ref:"myMqtt",selectedParams:a.selectedParams,onOnMessage:i.onMessage,onSetLog:i.setLog},null,8,["selectedParams","onOnMessage","onSetLog"])])),bottom:(0,n.w5)((()=>[(0,n.Wm)(u)])),_:1})}o(7658);const r={class:"row"},c={class:"row"},l={class:"col-3 h-100"},d={class:"col-9 h-100"},m={class:"row"};function u(e,t){return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",r,[(0,n._)("div",null,[(0,n.WI)(e.$slots,"top")])]),(0,n._)("div",c,[(0,n._)("div",l,[(0,n.WI)(e.$slots,"left")]),(0,n._)("div",d,[(0,n.WI)(e.$slots,"center")])]),(0,n._)("div",m,[(0,n._)("div",null,[(0,n.WI)(e.$slots,"bottom")])])],64)}var p=o(89);const h={},g=(0,p.Z)(h,[["render",u]]);var b=g,f=o(7139);const v={class:"border-bottom border-2 border-secondary"},_={class:"navbar navbar-expand-md navbar-dark fixed-top bg-dark p-2"},w={class:"container-fluid"},C=(0,n.uE)('<a class="navbar-brand" href="#">Umolab Devices</a><button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="hide"><button class="btn btn-primary" id="toggle-dark-mode">Toggle Dark Mode</button><button class="btn btn-primary" id="reset-to-system">Reset to System Theme</button></div>',3),y={class:"collapse navbar-collapse",id:"navbarCollapse"},k={class:"dropdown px-2"},x={class:"btn btn-primary dropdown-toggle",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"},M={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton1"},F=["onClick"],I={class:"dropdown px-2"},P={class:"btn btn-primary dropdown-toggle",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"},T={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton1"},S=["onClick"],D=(0,n._)("i",{class:"fa-solid fa-play text-success"},null,-1),L=[D],A=(0,n._)("i",{class:"fa-solid fa-stop text-danger"},null,-1),q=[A];function R(e,t,o,s,a,i){return(0,n.wg)(),(0,n.iD)("div",v,[(0,n._)("nav",_,[(0,n._)("div",w,[C,(0,n._)("div",y,[(0,n._)("div",k,[(0,n._)("button",x,(0,f.zw)(a.selectedDevice),1),(0,n._)("ul",M,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.devices,((e,t)=>((0,n.wg)(),(0,n.iD)("li",{key:t},[(0,n._)("a",{class:(0,f.C_)(["dropdown-item",{disabled:e.micros_count<=0}]),href:"#",onClick:t=>i.setDevice(e.id,e.device_name)},(0,f.zw)(e.device_name),11,F)])))),128))])]),(0,n._)("div",I,[(0,n._)("button",P,(0,f.zw)(a.selectedMicro),1),(0,n._)("ul",T,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.micros,((e,t)=>((0,n.wg)(),(0,n.iD)("li",{key:t},[(0,n._)("a",{class:"dropdown-item",href:"#",onClick:t=>i.setMicro(e)},(0,f.zw)(e.micro_name),9,S)])))),128))])])]),(0,n._)("div",null,[a.isExecuted?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("button",{key:0,class:"btn btn-primary",onClick:t[0]||(t[0]=e=>a.isExecuted=!a.isExecuted)},L)),a.isExecuted?((0,n.wg)(),(0,n.iD)("button",{key:1,class:"btn btn-primary",onClick:t[1]||(t[1]=e=>a.isExecuted=!a.isExecuted)},q)):(0,n.kq)("",!0)])])])])}const O="https://iotman.blkdem.ru/api/";var E={config:{headers:{Authorization:"Bearer npFLOv5yRgtGA4wBhhAtPUnrS7RDXnkAeLtlr6el"}},restHost:O,paramLink:O+"micro_params/read/page/1/20/",deviceLink:O+"devices/lookup/1/10",microLink:O+"device_micros/read/page/1/10"},N={emits:["onMicroChange","playStopAction"],props:["paramsCount"],data(){return{devices:[],micros:[],selectedDevice:"Select Device",selectedDeviceID:0,selectedMicro:"Select Micro",selectedMicroID:0,deviceAddress:"",isExecuted:!1}},mounted(){this.getDevices()},watch:{isExecuted(){this.$emit("playStopAction",this.isExecuted)}},methods:{async getDevices(){const e=await s.Z.get(E.deviceLink,E.config);this.devices=e.data.data},async getMicros(e){const t=await s.Z.get(E.microLink+"/"+e,E.config);return this.micros=t.data.data,this.micros},setDevice(e,t){this.selectedDevice=t,this.selectedDeviceID=e,this.getMicros(e)},setMicro(e){this.selectedMicro=e.micro_name,this.selectedMicroID=e.id,this.deviceAddress=e.device_micro_idx+" - "+e.device_micro_desc,this.$emit("onMicroChange",e.id,this.deviceAddress)},setParam(e){console.log(e)}}};const B=(0,p.Z)(N,[["render",R]]);var z=B;const $={class:"p-2 border-top border-2 border-secondary footer"},Q=(0,n.uE)('<div class="flex-center p-2 text-secondary">BlkDem for Umolab Group Â© 2022</div><div class="flex-center icon-social"><div class="mx-1"><a class="gold" href="https://github.com/BlkDem" target="_blank" title="https://github.com/BlkDem"><i class="fa-brands fa-square-github fa-2x" size="2xl"></i></a></div><div class="mx-1"><a class="gold" href="https://linkedin.com/in/blkdem" target="_blank" title="https://linkedin.com/in/blkdem"><i class="fa-brands fa-linkedin fa-2x" size="2xl"></i></a></div><div class="mx-1"><a class="gold" href="mailto:blkdem@blkdem.ru" target="_blank" title="blkdem@blkdem.ru"><i class="fa-solid fa-square-envelope fa-2x" size="2xl"></i></a></div><div class="mx-1"><a class="gold" href="https://wa.me/79039073355" target="_blank" title="+7 903 907-3355 / +90 501 082-0257"><i class="fa-brands fa-square-whatsapp fa-2x" size="2xl"></i></a></div><div class="mx-1"><a class="gold" href="https://t.me/Umolab1" target="_blank" title="https://t.me/Umolab1"><i class="fa-brands fa-telegram fa-2x" size="2xl"></i></a></div><div class="mx-1"><a class="gold" href="https://www.google.com/maps/place/36%C2%B053&#39;43.7%22N+30%C2%B042&#39;14.0%22E/@36.895482,30.7013021,17z/data=!3m1!4b1!4m4!3m3!8m2!3d36.895482!4d30.703877" target="_blank" title="Antalya, Turkey"><i icon="fa-solid fa-location-crosshairs" size="2xl"></i></a></div></div>',2),W=[Q];function U(e,t){return(0,n.wg)(),(0,n.iD)("section",$,W)}const j={},H=(0,p.Z)(j,[["render",U]]);var Z=H;const G=e=>((0,n.dD)("data-v-982f39e6"),e=e(),(0,n.Cn)(),e),Y={class:""},K=G((()=>(0,n._)("div",{class:"col-1"},[(0,n._)("i",{class:"fa-solid fa-microchip text-info"})],-1))),V={class:"col-3 text-center"},X={class:"col-6"},J=["onClick"],ee={class:"col-1"},te=["onClick"],oe=G((()=>(0,n._)("i",{class:"fa-regular fa-circle-right"},null,-1))),se=[oe];function ae(e,t,o,s,i,r){const c=(0,n.up)("CommonCard");return(0,n.wg)(),(0,n.j4)(c,{cardCaption:"Params"},{default:(0,n.w5)((()=>[(0,n._)("div",Y,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(i.params,((e,t)=>((0,n.wg)(),(0,n.iD)("div",{class:"m-1 py-1 px-2 border border-1 rounded-2 text-white row",key:t},[K,(0,n._)("div",V,(0,f.zw)(e.id),1),(0,n._)("div",X,[(0,n._)("a",{href:"#",onClick:(0,a.iM)((t=>r.pushParam(e)),["prevent"])},(0,f.zw)(e.param_name),9,J)]),(0,n._)("div",ee,[(0,n._)("a",{href:"#",onClick:(0,a.iM)((t=>r.pushParam(e)),["prevent"])},se,8,te)])])))),128))])])),_:1})}const ne={class:"card-header flex-space pb-2"},ie=["href"],re=["id","onClick"],ce=["id"],le={class:"p-1"};function de(e,t,o,s,i,r){return(0,n.wg)(),(0,n.iD)("div",{class:(0,f.C_)(["text-white bg-dark",{"expanded-fullscreen border-4 border-top rounded-top border-bottom rounded-bottom border-secondary p-2":i.isFullScreen,"card my-3":!i.isFullScreen}])},[(0,n._)("div",ne,[(0,n._)("h5",{class:"w-100 elipsis",onDblclick:t[0]||(t[0]=(0,a.iM)(((...e)=>r.switchFullscreenMode&&r.switchFullscreenMode(...e)),["prevent"]))},[(0,n._)("a",{style:{"text-decoration":"none"},"data-toggle":"collapse",href:"#"+i.cardId,"aria-expanded":"true","aria-controls":"collapse-example",id:"heading-example",class:"d-block"},[(0,n.Uk)((0,f.zw)(o.cardCaption)+" ",1),(0,n._)("span",{class:(0,f.C_)({hide:!o.isAdditionalCaption}),style:{"overflow-wrap":"break-word"}}," - "+(0,f.zw)(o.cardCaptionAdd),3)],8,ie)],32),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.advancedControls,((e,t)=>((0,n.wg)(),(0,n.iD)("button",{class:(0,f.C_)(["btn btn-primary btn-sm mr-1",e.controlActive]),id:t,key:t,onClick:t=>r.advancedControlsClick(e)},[(0,n.Uk)((0,f.zw)(e.controlCaption)+" ",1),(0,n._)("i",{class:(0,f.C_)(e.controlAwesomeIcon)},null,2)],10,re)))),128)),(0,n._)("button",{class:(0,f.C_)(["btn btn-primary btn-sm",{"btn-secondary":i.isFullScreen}]),onClick:t[1]||(t[1]=(...e)=>r.switchFullscreenMode&&r.switchFullscreenMode(...e))},[(0,n._)("i",{class:(0,f.C_)({"fa-solid fa-maximize":!i.isFullScreen,"fa-solid fa-compress":i.isFullScreen})},null,2)],2)]),(0,n._)("div",{id:i.cardId,class:(0,f.C_)(["collapse",{show:i.isExpanded}]),"aria-labelledby":"heading-example"},[(0,n._)("div",le,[(0,n._)("div",{class:(0,f.C_)({"mx-2":o.margins,collapse:o.isCollapsed})},[(0,n.WI)(e.$slots,"default",{cardWidth:o.cardWidth},(()=>[(0,n.Uk)("Loading...")]))],2)])],10,ce)],2)}var me={makeId(e,t){let o="";const s="abcdefghijklmnopqrstuvwxyz",a=s.length;let n=0;while(n<e)o+=s.charAt(Math.floor(Math.random()*a)),n+=1;return"id_"+t+o}},ue={emits:["onAdvancedControlClick"],props:{cardCaption:{type:String,default:"Caption"},cardCaptionAdd:{type:String,default:""},margins:{type:Number,default:0},cardWidth:{type:String,default:""},isCollapsed:{type:Boolean,default:!1},isCollapseButtonHidden:{type:Boolean,default:!1},isAdditionalCaption:{type:Boolean,default:!1},advancedControls:{type:Object}},data(){return{cardId:null,isFullScreen:!1,isExpanded:!0}},created(){this.cardId=me.makeId(8,"card_"),this.enumAdvancedControls()},methods:{advancedControlsClick(e){this.$emit("onAdvancedControlClick",e)},enumAdvancedControls(){},switchFullscreenMode(){this.isFullScreen=!this.isFullScreen,window.scrollTo(0,0)}}};const pe=(0,p.Z)(ue,[["render",de]]);var he=pe,ge={components:{CommonCard:he},emits:["pushItem"],props:{microId:{default:void 0}},data(){return{params:[]}},mounted(){},watch:{microId(){this.getParams(this.microId)}},methods:{async getParams(e){const t=await s.Z.get(E.paramLink+e,E.config);this.params=t.data.data},pushParam(e){this.$emit("pushItem",e)},clearItems(){this.params=[]}}};const be=(0,p.Z)(ge,[["render",ae],["__scopeId","data-v-982f39e6"]]);var fe=be;const ve=e=>((0,n.dD)("data-v-2d1b915b"),e=e(),(0,n.Cn)(),e),_e={class:"max-height-70vh"},we={class:"row text-vertical-center"},Ce=ve((()=>(0,n._)("div",{class:"col-1"},[(0,n._)("i",{class:"fa-solid fa-microchip text-success mx-1"})],-1))),ye={class:"col-2"},ke={class:"col-2"},xe={class:"col-2 text-info"},Me={class:"col-3"},Fe={class:"dropdown"},Ie={class:"btn btn-success btn-sm dropdown-toggle w-100",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"},Pe={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton1"},Te=["onClick"],Se=["onClick"],De=["onClick"],Le=["onClick"],Ae=["onClick"],qe=["onClick"],Re=["onClick"],Oe={class:"col-1"},Ee={class:"dropdown"},Ne={class:"btn btn-info btn-sm dropdown-toggle w-100",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"},Be={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton1"},ze=["onClick"],$e=["onClick"],Qe=["onClick"],We=["onClick"],Ue=["onClick"],je={class:"col-1 text-end"},He=["onClick"],Ze=ve((()=>(0,n._)("i",{class:"fa-solid fa-xmark text-danger"},null,-1))),Ge=[Ze],Ye=["value"],Ke={class:"bottom-controls"},Ve=ve((()=>(0,n._)("label",{for:"autoscroll",class:"mx-2"},"auto scroll",-1)));function Xe(e,t,o,s,i,r){return(0,n.wg)(),(0,n.iD)("div",_e,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.items,((e,t)=>((0,n.wg)(),(0,n.iD)("div",{class:"m-1 py-1 px-2 border border-1 rounded-2 text-whites",key:t},[(0,n._)("div",we,[Ce,(0,n._)("div",ye," ("+(0,f.zw)(e.id)+") "+(0,f.zw)(e.type_name),1),(0,n._)("div",ke,(0,f.zw)(e.param_name),1),(0,n._)("div",xe,(0,f.zw)(e.param_value),1),(0,n._)("div",Me,[(0,n._)("div",Fe,[(0,n._)("button",Ie,(0,f.zw)(i.paramFunc[t].FuncName),1),(0,n._)("ul",Pe,[(0,n._)("li",null,[(0,n._)("a",{class:"dropdown-item",onClick:e=>r.setFunction(t,"F_RANGE",-10,0),href:"#"},"Range (-10 0)",8,Te)]),(0,n._)("li",null,[(0,n._)("a",{class:"dropdown-item",onClick:e=>r.setFunction(t,"F_RANGE",0,100),href:"#"},"Range (0 100)",8,Se)]),(0,n._)("li",null,[(0,n._)("a",{class:"dropdown-item",onClick:e=>r.setFunction(t,"F_TIME"),href:"#"},"Time",8,De)]),(0,n._)("li",null,[(0,n._)("a",{class:"dropdown-item",onClick:e=>r.setFunction(t,"F_COUNTER"),href:"#"},"Counter",8,Le)]),(0,n._)("li",null,[(0,n._)("a",{class:"dropdown-item",onClick:e=>r.setFunction(t,"F_COUNTER_FROM"),href:"#"},"Counter From",8,Ae)]),(0,n._)("li",null,[(0,n._)("a",{class:"dropdown-item",onClick:e=>r.setFunction(t,"F_RGB"),href:"#"},"RGB",8,qe)]),(0,n._)("li",null,[(0,n._)("a",{class:"dropdown-item",onClick:e=>r.setFunction(t,"F_SWITCH"),href:"#"},"Switch (0-1)",8,Re)])])])]),(0,n._)("div",Oe,[(0,n._)("div",Ee,[(0,n._)("button",Ne,(0,f.zw)(o.items[t].frequency),1),(0,n._)("ul",Be,[(0,n._)("li",null,[(0,n._)("a",{class:"dropdown-item",onClick:e=>r.setFrequency(t,1),href:"#"},"1s",8,ze)]),(0,n._)("li",null,[(0,n._)("a",{class:"dropdown-item",onClick:e=>r.setFrequency(t,2),href:"#"},"2s",8,$e)]),(0,n._)("li",null,[(0,n._)("a",{class:"dropdown-item",onClick:e=>r.setFrequency(t,3),href:"#"},"3s",8,Qe)]),(0,n._)("li",null,[(0,n._)("a",{class:"dropdown-item",onClick:e=>r.setFrequency(t,5),href:"#"},"5s",8,We)]),(0,n._)("li",null,[(0,n._)("a",{class:"dropdown-item",onClick:e=>r.setFrequency(t,10),href:"#"},"10s",8,Ue)])])])]),(0,n._)("div",je,[(0,n._)("a",{href:"#",onClick:e=>r.removeItem(t)},Ge,8,He)])])])))),128)),(0,n._)("textarea",{class:"form-control stick-bottom bg-dark text-info",value:o.logs,rows:"8",id:"textarea_id"},null,8,Ye),(0,n._)("div",Ke,[(0,n.wy)((0,n._)("input",{type:"checkbox",class:"",id:"autoscroll","onUpdate:modelValue":t[0]||(t[0]=e=>i.autoscroll=e)},null,512),[[a.e8,i.autoscroll]]),Ve])])}var Je={Random(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e},randomIntFromInterval(e,t){return Math.floor(Math.random()*(t-e+1)+e)}},et={Factory:{F_RANGE:{FuncName:"Range",value:(...e)=>(console.log("range: ",e[0]),Je.Random(parseInt(e[0][0]),parseInt(e[0][1])))},F_SWITCH:{FuncName:"Switch",value:()=>Je.Random(0,1)},F_TIME:{FuncName:"Time",value:()=>{let e=new Date;return e.toLocaleTimeString()}},F_COUNTER:{FuncName:"Counter Time",value:()=>Math.round((new Date).getTime()/1e3)},F_COUNTER_FROM:{FuncName:"Counter From",value:(e=0)=>{var t=e;return function(){return t++,t}}},F_RGB:{FuncName:"RGB",value:()=>65536*Je.Random(0,255)+256*Je.Random(0,255)+Je.Random(0,255)}}},tt={emits:["removeItem","setLog","setItemFrequency","syncParam"],props:{items:{type:Array},logs:{type:String},uptime:{type:Number}},data(){return{paramFunc:[],autoscroll:!0}},created(){this.paramFunc=this.items},mounted(){this.textareaScrollBottom()},methods:{getParamNameID(e){return this.items[e].param_name+" ("+this.items[e].id+")"},textareaScrollBottom(){var e=document.getElementById("textarea_id");setInterval((()=>{this.autoscroll&&(e.scrollTop=e.scrollHeight)}),1e3)},removeItem(e){this.setLog(1,"Item removed: "+this.getParamNameID(e)),this.$emit("removeItem",e)},clearItems(){this.paramFunc=[]},updateParamValue(e,t){this.paramFunc[e].param_value=t},setFunction(e,t,...o){console.log(o.length),this.paramFunc[e].func=t,this.paramFunc[e].args=o,this.paramFunc[e].FuncName=et.Factory[t].FuncName,this.paramFunc[e].FuncName+=o.length>0?" ("+[...o].join(" ")+")":"",this.$emit("syncParam",e,this.paramFunc[e])},setFrequency(e,t){this.setLog(0,"Set Frequency for Item: "+this.getParamNameID(e)+" - Interval: "+t),this.paramFunc[e].frequency=t,this.$emit("syncParam",e,this.items[e])},setLog(e,t){this.$emit("setLog",e,t)}}};const ot=(0,p.Z)(tt,[["render",Xe],["__scopeId","data-v-2d1b915b"]]);var st=ot;function at(e,t,o,s,a,i){return(0,n.wg)(),(0,n.iD)("div")}var nt=o(9999),it={components:{CommonCard:he},name:"MQTT",emits:["onConnect","onMessage","onError","setLog"],props:["selectedParams"],data(){return{connection:{host:"ice9.umolab.ru",port:9883,endpoint:"/",clean:!0,connectTimeout:4e3,reconnectPeriod:4e3,protocol:"",clientId:"",username:"umolab",password:""},subscribtion:{topic:"",qos:0},publish:{topic:"",qos:0,payload:"",retain:!0},client:{connected:!1},subscribeSuccess:!1}},created(){this.connection.clientId=me.makeId(8,"mqtt_umolab_")},mounted(){this.getMQTTParams()},beforeUnmount(){this.destroyConnection(),console.log(this.client.connected)},watch:{selectedParams:{immediate:!0,deep:!0,handler(e,t){this.processParams()}}},methods:{setLog(e,t){this.$emit("setLog",e,t)},async getMQTTParams(){try{await axios.get(E.restHost+"presets/group/MQTT",E.config).then((e=>{const t=e.data.data;for(let o in t)"MQTT_SERVER"===t[o].preset_key&&(this.connection.host=t[o].preset_value),"MQTT_PROTOCOL"===t[o].preset_key&&(this.connection.protocol=t[o].preset_value),"MQTT_PORT"===t[o].preset_key&&(this.connection.port=t[o].preset_value);this.createConnection()}))}catch(e){console.log(e)}},processParams(){for(let e in this.selectedParams)this.selectedParams[e]["param_in"]<=0&&(this.doSubscribe(this.selectedParams[e]["param_fullname"]),this.setLog(0,"Topic: "+this.selectedParams[e]["param_fullname"]+" subscribed"))},createConnection(){const{host:e,port:t,endpoint:o,...s}=this.connection,a=this.connection.protocol+"://"+this.connection.host+":"+this.connection.port;try{this.client=nt.connect(a,s)}catch(n){console.log("MQTT: connect error",n)}this.client.on("connect",(()=>{console.log("MQTT: Connection succeeded!"),this.setLog(0,"MQTT: Connection succeeded!"),this.$emit("onConnect",!0),this.processParams()})),this.client.on("error",(e=>{console.log("MQTT: Connection failed",e),this.$emit("onError",e)})),this.client.on("message",((e,t)=>{this.setLog(0,"MQTT topic: "+e+" message: "+t.toString()),this.$emit("onMessage",e,t.toString())}))},doSubscribe(e){const t=0;this.client.subscribe(e,{qos:t},((e,t)=>{e?console.log("MQTT: Subscribe to topics error",e):(this.subscribeSuccess=!0,t||(this.setLog(0,"MQTT: Subscribe to topics "+JSON.stringify(t)),console.log("MQTT: Subscribe to topics res",t)))}))},doUnSubscribe(){const{topic:e}=this.subscribtion;this.client.unsubscribe(e,(e=>{e&&console.log("MQTT: Unsubscribe error",e)}))},doPublish(e,t){const{qos:o,retain:s}=this.publish;this.client.publish(e,t,{qos:o,retain:s},(e=>{e&&console.log("MQTT: Publish error",e)}))},destroyConnection(){if(this.client.connected)try{this.client.end(),this.client={connected:!1},console.log("MQTT: Successfully disconnected!")}catch(e){console.log("MQTT: Disconnect failed",e.toString())}}}};const rt=(0,p.Z)(it,[["render",at]]);var ct=rt,lt={name:"App",components:{MasterSlaveLayout:b,TopNavbar:z,MainFooter:Z,LoadControllers:fe,CommonCard:he,SelectedParams:st,MyMqtt:ct},data(){return{microId:"",deviceAddress:"please select a device",selectedParams:[],paramLogs:"Logs",timers:[],uptime:0}},mounted(){setInterval((()=>{this.uptime++}),1e3)},methods:{setLog(e=0,...t){this.paramLogs.length>2048&&(this.paramLogs="");let o="undefined: ";switch(e){case 0:o="info: ";break;case 1:o="warning: ";break;case 2:o="error: ";break}"Logs"===this.paramLogs&&(this.paramLogs=""),this.paramLogs+=o+[...t].join(" ")+"\r\n"},startActions(){let e=0;for(let t in this.selectedParams)e=1e3*this.selectedParams[t].frequency,isNaN(e)||this.timers.push(setInterval((()=>{const e=et.Factory[this.selectedParams[t].func].value(this.selectedParams[t].args),o="function"===typeof e?e().toString():e.toString();this.$refs.myMqtt.doPublish(this.selectedParams[t].param_fullname,o)}),e));console.log(this.timers)},stopActions(){for(let e in this.timers)clearInterval(this.timers[e]);this.timers=[]},playStopAction(e){e?this.startActions():this.stopActions()},onMicroChange(e,t){this.$refs.loadControllers.clearItems(),this.microId=e,this.deviceAddress=t,this.setLog(0,"Micro selected: ",`(${e})`,t)},syncParam(e,t){this.selectedParams[e]=t,console.log(this.selectedParams[e])},setItemFrequency(e,t){e.frequency=t},pushItem(e){this.selectedParams.length>4?this.setLog(1,"Max selected param count is 5"):this.selectedParams.includes(e)||(e.param_fullname="/"+e.device_micro_idx+"/"+e.param_name,e.timerId=-1,this.setLog(0,"Param added: "+e.param_name+": "+e.param_fullname),console.log(e),this.selectedParams.push(e))},removeItem(e){this.selectedParams.splice(e,1)},onMessage(e,t){for(let o in this.selectedParams)this.selectedParams[o].param_fullname===e&&(this.selectedParams[o].param_value=t)}}};const dt=(0,p.Z)(lt,[["render",i]]);var mt=dt;window.axios=s.Z,window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",window.axios.defaults.withCredentials=!0,(0,a.ri)(mt).mount("#app")}},t={};function o(s){var a=t[s];if(void 0!==a)return a.exports;var n=t[s]={exports:{}};return e[s].call(n.exports,n,n.exports,o),n.exports}o.m=e,function(){var e=[];o.O=function(t,s,a,n){if(!s){var i=1/0;for(d=0;d<e.length;d++){s=e[d][0],a=e[d][1],n=e[d][2];for(var r=!0,c=0;c<s.length;c++)(!1&n||i>=n)&&Object.keys(o.O).every((function(e){return o.O[e](s[c])}))?s.splice(c--,1):(r=!1,n<i&&(i=n));if(r){e.splice(d--,1);var l=a();void 0!==l&&(t=l)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[s,a,n]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var s in t)o.o(t,s)&&!o.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};o.O.j=function(t){return 0===e[t]};var t=function(t,s){var a,n,i=s[0],r=s[1],c=s[2],l=0;if(i.some((function(t){return 0!==e[t]}))){for(a in r)o.o(r,a)&&(o.m[a]=r[a]);if(c)var d=c(o)}for(t&&t(s);l<i.length;l++)n=i[l],o.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return o.O(d)},s=self["webpackChunku_emu"]=self["webpackChunku_emu"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=o.O(void 0,[998],(function(){return o(7575)}));s=o.O(s)})();
//# sourceMappingURL=app.2c19e0cd.js.map